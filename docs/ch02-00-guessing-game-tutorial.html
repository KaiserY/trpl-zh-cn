<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>çŒœçŒœçœ‹æ•™ç¨‹ - Rust ç¨‹åºè®¾è®¡è¯­è¨€ ç®€ä½“ä¸­æ–‡ç‰ˆ</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Rust ç¨‹åºè®¾è®¡è¯­è¨€ ç®€ä½“ä¸­æ–‡ç‰ˆ">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <base href="">

        <link rel="stylesheet" href="book.css">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">

        <!-- MathJax -->
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Fetch JQuery from CDN but have a local fallback -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='jquery.js'%3E%3C/script%3E"));
            }
        </script>
    </head>
    <body class="light">
        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme = localStorage.getItem('theme');
            if (theme == null) { theme = 'light'; }
            $('body').removeClass().addClass(theme);
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = localStorage.getItem('sidebar');
            if (sidebar === "hidden") { $("html").addClass("sidebar-hidden") }
            else if (sidebar === "visible") { $("html").addClass("sidebar-visible") }
        </script>

        <div id="sidebar" class="sidebar">
            <ul class="chapter"><li><a href="ch01-00-introduction.html"><strong>1.</strong> ä»‹ç»</a></li><li><ul class="section"><li><a href="ch01-01-installation.html"><strong>1.1.</strong> å®‰è£…</a></li><li><a href="ch01-02-hello-world.html"><strong>1.2.</strong> Hello, World!</a></li></ul></li><li><a href="ch02-00-guessing-game-tutorial.html" class="active"><strong>2.</strong> çŒœçŒœçœ‹æ•™ç¨‹</a></li><li><a href="ch03-00-common-programming-concepts.html"><strong>3.</strong> é€šç”¨ç¼–ç¨‹æ¦‚å¿µ</a></li><li><ul class="section"><li><a href="ch03-01-variables-and-mutability.html"><strong>3.1.</strong> å˜é‡å’Œå¯å˜æ€§</a></li><li><a href="ch03-02-data-types.html"><strong>3.2.</strong> æ•°æ®ç±»å‹</a></li><li><a href="ch03-03-how-functions-work.html"><strong>3.3.</strong> å‡½æ•°å¦‚ä½•å·¥ä½œ</a></li><li><a href="ch03-04-comments.html"><strong>3.4.</strong> æ³¨é‡Š</a></li><li><a href="ch03-05-control-flow.html"><strong>3.5.</strong> æ§åˆ¶æµ</a></li></ul></li><li><a href="ch04-00-understanding-ownership.html"><strong>4.</strong> è®¤è¯†æ‰€æœ‰æƒ</a></li><li><ul class="section"><li><a href="ch04-01-what-is-ownership.html"><strong>4.1.</strong> ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ</a></li><li><a href="ch04-02-references-and-borrowing.html"><strong>4.2.</strong> å¼•ç”¨ &amp; å€Ÿç”¨</a></li><li><a href="ch04-03-slices.html"><strong>4.3.</strong> Slices</a></li></ul></li><li><a href="ch05-00-structs.html"><strong>5.</strong> ç»“æ„ä½“</a></li><li><ul class="section"><li><a href="ch05-01-method-syntax.html"><strong>5.1.</strong> æ–¹æ³•è¯­æ³•</a></li></ul></li><li><a href="ch06-00-enums.html"><strong>6.</strong> æšä¸¾å’Œæ¨¡å¼åŒ¹é…</a></li><li><ul class="section"><li><a href="ch06-01-defining-an-enum.html"><strong>6.1.</strong> å®šä¹‰æšä¸¾</a></li><li><a href="ch06-02-match.html"><strong>6.2.</strong> <code>match</code>æ§åˆ¶æµè¿ç®—ç¬¦</a></li><li><a href="ch06-03-if-let.html"><strong>6.3.</strong> <code>if let</code>ç®€å•æ§åˆ¶æµ</a></li></ul></li><li><a href="ch07-00-modules.html"><strong>7.</strong> æ¨¡å—</a></li><li><ul class="section"><li><a href="ch07-01-mod-and-the-filesystem.html"><strong>7.1.</strong> <code>mod</code>å’Œæ–‡ä»¶ç³»ç»Ÿ</a></li><li><a href="ch07-02-controlling-visibility-with-pub.html"><strong>7.2.</strong> ä½¿ç”¨<code>pub</code>æ§åˆ¶å¯è§æ€§</a></li><li><a href="ch07-03-importing-names-with-use.html"><strong>7.3.</strong> ä½¿ç”¨<code>use</code>å¯¼å…¥å‘½å</a></li></ul></li><li><a href="ch08-00-common-collections.html"><strong>8.</strong> é€šç”¨é›†åˆç±»å‹</a></li><li><ul class="section"><li><a href="ch08-01-vectors.html"><strong>8.1.</strong> vector</a></li><li><a href="ch08-02-strings.html"><strong>8.2.</strong> å­—ç¬¦ä¸²</a></li><li><a href="ch08-03-hash-maps.html"><strong>8.3.</strong> å“ˆå¸Œ map</a></li></ul></li><li><a href="ch09-00-error-handling.html"><strong>9.</strong> é”™è¯¯å¤„ç†</a></li><li><ul class="section"><li><a href="ch09-01-unrecoverable-errors-with-panic.html"><strong>9.1.</strong> <code>panic!</code>ä¸ä¸å¯æ¢å¤çš„é”™è¯¯</a></li><li><a href="ch09-02-recoverable-errors-with-result.html"><strong>9.2.</strong> <code>Result</code>ä¸å¯æ¢å¤çš„é”™è¯¯</a></li><li><a href="ch09-03-to-panic-or-not-to-panic.html"><strong>9.3.</strong> <code>panic!</code>è¿˜æ˜¯ä¸<code>panic!</code></a></li></ul></li><li><a href="ch10-00-generics.html"><strong>10.</strong> æ³›å‹ã€trait å’Œç”Ÿå‘½å‘¨æœŸ</a></li><li><ul class="section"><li><a href="ch10-01-syntax.html"><strong>10.1.</strong> æ³›å‹æ•°æ®ç±»å‹</a></li><li><a href="ch10-02-traits.html"><strong>10.2.</strong> traitï¼šå®šä¹‰å…±äº«çš„è¡Œä¸º</a></li><li><a href="ch10-03-lifetime-syntax.html"><strong>10.3.</strong> ç”Ÿå‘½å‘¨æœŸä¸å¼•ç”¨æœ‰æ•ˆæ€§</a></li></ul></li><li><a href="ch11-00-testing.html"><strong>11.</strong> æµ‹è¯•</a></li><li><ul class="section"><li><a href="ch11-01-writing-tests.html"><strong>11.1.</strong> ç¼–å†™æµ‹è¯•</a></li><li><a href="ch11-02-running-tests.html"><strong>11.2.</strong> è¿è¡Œæµ‹è¯•</a></li><li><a href="ch11-03-test-organization.html"><strong>11.3.</strong> æµ‹è¯•çš„ç»„ç»‡ç»“æ„</a></li></ul></li><li><a href="ch12-00-an-io-project.html"><strong>12.</strong> ä¸€ä¸ª I/O é¡¹ç›®</a></li><li><ul class="section"><li><a href="ch12-01-accepting-command-line-arguments.html"><strong>12.1.</strong> æ¥å—å‘½ä»¤è¡Œå‚æ•°</a></li><li><a href="ch12-02-reading-a-file.html"><strong>12.2.</strong> è¯»å–æ–‡ä»¶</a></li><li><a href="ch12-03-improving-error-handling-and-modularity.html"><strong>12.3.</strong> å¢å¼ºé”™è¯¯å¤„ç†å’Œæ¨¡å—åŒ–</a></li><li><a href="ch12-04-testing-the-librarys-functionality.html"><strong>12.4.</strong> æµ‹è¯•åº“çš„åŠŸèƒ½</a></li><li><a href="ch12-05-working-with-environment-variables.html"><strong>12.5.</strong> å¤„ç†ç¯å¢ƒå˜é‡</a></li><li><a href="ch12-06-writing-to-stderr-instead-of-stdout.html"><strong>12.6.</strong> è¾“å‡ºåˆ°<code>stderr</code>è€Œä¸æ˜¯<code>stdout</code></a></li></ul></li><li><a href="ch13-00-functional-features.html"><strong>13.</strong> Rust ä¸­çš„å‡½æ•°å¼è¯­è¨€åŠŸèƒ½</a></li><li><ul class="section"><li><a href="ch13-01-closures.html"><strong>13.1.</strong> é—­åŒ…</a></li><li><a href="ch13-02-iterators.html"><strong>13.2.</strong> è¿­ä»£å™¨</a></li><li><a href="ch13-03-improving-our-io-project.html"><strong>13.3.</strong> æ”¹è¿› I/O é¡¹ç›®</a></li><li><a href="ch13-04-performance.html"><strong>13.4.</strong> æ€§èƒ½</a></li></ul></li><li><a href="ch14-00-more-about-cargo.html"><strong>14.</strong> æ›´å¤šå…³äº Cargo å’Œ Crates.io</a></li><li><ul class="section"><li><a href="ch14-01-release-profiles.html"><strong>14.1.</strong> å‘å¸ƒé…ç½®</a></li><li><a href="ch14-02-publishing-to-crates-io.html"><strong>14.2.</strong> å°† crate å‘å¸ƒåˆ° Crates.io</a></li><li><a href="ch14-03-cargo-workspaces.html"><strong>14.3.</strong> Cargo å·¥ä½œç©ºé—´</a></li><li><a href="ch14-04-installing-binaries.html"><strong>14.4.</strong> ä½¿ç”¨<code>cargo install</code>ä» Crates.io å®‰è£…æ–‡ä»¶</a></li><li><a href="ch14-05-extending-cargo.html"><strong>14.5.</strong> Cargo è‡ªå®šä¹‰æ‰©å±•å‘½ä»¤</a></li></ul></li><li><a href="ch15-00-smart-pointers.html"><strong>15.</strong> æ™ºèƒ½æŒ‡é’ˆ</a></li><li><ul class="section"><li><a href="ch15-01-box.html"><strong>15.1.</strong> <code>Box&lt;T&gt;</code>ç”¨äºå·²çŸ¥å¤§å°çš„å †ä¸Šæ•°æ®</a></li><li><a href="ch15-02-deref.html"><strong>15.2.</strong> <code>Deref</code> Trait å…è®¸é€šè¿‡å¼•ç”¨è®¿é—®æ•°æ®</a></li><li><a href="ch15-03-drop.html"><strong>15.3.</strong> <code>Drop</code> Trait è¿è¡Œæ¸…ç†ä»£ç </a></li><li><a href="ch15-04-rc.html"><strong>15.4.</strong> <code>Rc&lt;T&gt;</code> å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆ</a></li><li><a href="ch15-05-interior-mutability.html"><strong>15.5.</strong> <code>RefCell&lt;T&gt;</code>å’Œå†…éƒ¨å¯å˜æ€§æ¨¡å¼</a></li><li><a href="ch15-06-reference-cycles.html"><strong>15.6.</strong> å¼•ç”¨å¾ªç¯å’Œå†…å­˜æ³„æ¼æ˜¯å®‰å…¨çš„</a></li></ul></li><li><a href="ch16-00-concurrency.html"><strong>16.</strong> æ— ç•å¹¶å‘</a></li><li><ul class="section"><li><a href="ch16-01-threads.html"><strong>16.1.</strong> çº¿ç¨‹</a></li><li><a href="ch16-02-message-passing.html"><strong>16.2.</strong> æ¶ˆæ¯ä¼ é€’</a></li><li><a href="ch16-03-shared-state.html"><strong>16.3.</strong> å…±äº«çŠ¶æ€</a></li><li><a href="ch16-04-extensible-concurrency-sync-and-send.html"><strong>16.4.</strong> å¯æ‰©å±•çš„å¹¶å‘ï¼š<code>Sync</code>å’Œ<code>Send</code></a></li></ul></li><li><a href="ch17-00-oop.html"><strong>17.</strong> é¢å‘å¯¹è±¡</a></li><li><ul class="section"><li><a href="ch17-01-what-is-oo.html"><strong>17.1.</strong> ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡</a></li><li><a href="ch17-02-trait-objects.html"><strong>17.2.</strong> traitå¯¹è±¡</a></li></ul></li></ul>
        </div>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <i id="sidebar-toggle" class="fa fa-bars"></i>
                        <i id="theme-toggle" class="fa fa-paint-brush"></i>
                    </div>

                    <h1 class="menu-title">Rust ç¨‹åºè®¾è®¡è¯­è¨€ ç®€ä½“ä¸­æ–‡ç‰ˆ</h1>

                    <div class="right-buttons">
                        <i id="print-button" class="fa fa-print" title="Print this book"></i>
                    </div>
                </div>

                <div id="content" class="content">
                    <a class="header" href="#çŒœçŒœçœ‹" name="çŒœçŒœçœ‹"><h1>çŒœçŒœçœ‹</h1></a>
<blockquote>
<p><a href="https://github.com/rust-lang/book/blob/master/src/ch02-00-guessing-game-tutorial.md">ch02-00-guessing-game-tutorial.md</a>
<br>
commit e6d6caab41471f7115a621029bd428a812c5260e</p>
</blockquote>
<p>è®©æˆ‘ä»¬äº²è‡ªåŠ¨æ‰‹ï¼Œå¿«é€Ÿç†Ÿæ‚‰ Rustï¼æœ¬ç« å°†ä»‹ç» Rust ä¸­å¸¸ç”¨çš„ä¸€äº›æ¦‚å¿µï¼Œå¹¶é€šè¿‡çœŸå®çš„ç¨‹åºæ¥å±•ç¤ºå¦‚ä½•è¿ç”¨ã€‚ä½ å°†ä¼šå­¦åˆ°æ›´å¤šè¯¸å¦‚ <code>let</code>ã€<code>match</code>ã€æ–¹æ³•ã€å…³è”å‡½æ•°ã€å¤–éƒ¨ crate ç­‰çŸ¥è¯†ï¼åç»§ç« èŠ‚ä¼šæ·±å…¥æ¢ç´¢è¿™äº›æ¦‚å¿µçš„ç»†èŠ‚ã€‚åœ¨è¿™ä¸€ç« ï¼Œæˆ‘ä»¬å°†ç»ƒä¹ åŸºç¡€ã€‚</p>
<p>æˆ‘ä»¬ä¼šå®ç°ä¸€ä¸ªç»å…¸çš„æ–°æ‰‹ç¼–ç¨‹é—®é¢˜ï¼šçŒœçŒœçœ‹æ¸¸æˆã€‚å®ƒæ˜¯è¿™ä¹ˆå·¥ä½œçš„ï¼šç¨‹åºå°†ä¼šéšæœºç”Ÿæˆä¸€ä¸ª 1 åˆ° 100 ä¹‹é—´çš„éšæœºæ•´æ•°ã€‚æ¥ç€å®ƒä¼šè¯·ç©å®¶çŒœä¸€ä¸ªæ•°å¹¶è¾“å…¥ï¼Œç„¶åæç¤ºçŒœæµ‹æ˜¯å¤§äº†è¿˜æ˜¯å°äº†ã€‚å¦‚æœçŒœå¯¹äº†ï¼Œå®ƒä¼šåœ¨é€€å‡ºå‰ç¥è´ºä½ ã€‚</p>
<a class="header" href="#å‡†å¤‡ä¸€ä¸ªæ–°é¡¹ç›®" name="å‡†å¤‡ä¸€ä¸ªæ–°é¡¹ç›®"><h2>å‡†å¤‡ä¸€ä¸ªæ–°é¡¹ç›®</h2></a>
<p>è¦åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œè¿›å…¥ç¬¬ä¸€ç« åˆ›å»ºçš„<strong>é¡¹ç›®</strong>ç›®å½•ï¼Œä½¿ç”¨ Cargo åˆ›å»ºå®ƒï¼š</p>
<pre><code>$ cargo new guessing_game --bin
$ cd guessing_game
</code></pre>
<p>ç¬¬ä¸€ä¸ªå‘½ä»¤ï¼Œ<code>cargo new</code>ï¼Œè·å–é¡¹ç›®çš„åç§°ï¼ˆ<code>guessing_game</code>ï¼‰ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚<code>--bin</code>å‚æ•°å‘Šè¯‰ Cargo åˆ›å»ºä¸€ä¸ªäºŒè¿›åˆ¶é¡¹ç›®ï¼Œä¸ç¬¬ä¸€ç« ç±»ä¼¼ã€‚ç¬¬äºŒä¸ªå‘½ä»¤è¿›å…¥åˆ°æ–°åˆ›å»ºçš„é¡¹ç›®ç›®å½•ã€‚</p>
<p>çœ‹çœ‹ç”Ÿæˆçš„ <em>Cargo.toml</em> æ–‡ä»¶ï¼š</p>
<p><span class="filename">Filename: Cargo.toml</span></p>
<pre><code class="language-toml">[package]
name = &quot;guessing_game&quot;
version = &quot;0.1.0&quot;
authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]

[dependencies]
</code></pre>
<p>å¦‚æœ Cargo ä»ç¯å¢ƒä¸­è·å–çš„å¼€å‘è€…ä¿¡æ¯ä¸æ­£ç¡®ï¼Œä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å¹¶å†æ¬¡ä¿å­˜ã€‚</p>
<p>æ­£å¦‚ç¬¬ä¸€ç« é‚£æ ·ï¼Œ<code>cargo new</code> ç”Ÿæˆäº†ä¸€ä¸ªâ€œHello, world!â€ç¨‹åºã€‚æŸ¥çœ‹ <em>src/main.rs</em> æ–‡ä»¶ï¼š</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust">fn main() {
    println!(&quot;Hello, world!&quot;);
}
</code></pre>
<p>ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨ <code>cargo run</code>ï¼Œç¼–è¯‘è¿è¡Œä¸€æ­¥åˆ°ä½ï¼š</p>
<pre><code class="language-sh">$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
     Running `target/debug/guessing_game`
Hello, world!
</code></pre>
<p><code>run</code> å‘½ä»¤é€‚åˆç”¨åœ¨éœ€è¦å¿«é€Ÿè¿­ä»£çš„é¡¹ç›®ï¼Œè€Œè¿™ä¸ªæ¸¸æˆå°±æ˜¯ï¼šæˆ‘ä»¬éœ€è¦åœ¨ä¸‹ä¸€æ­¥è¿­ä»£ä¹‹å‰å¿«é€Ÿæµ‹è¯•ã€‚</p>
<p>é‡æ–°æ‰“å¼€ <em>src/main.rs</em> æ–‡ä»¶ã€‚æˆ‘ä»¬å°†ä¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ç¼–å†™å…¨éƒ¨ä»£ç ã€‚</p>
<a class="header" href="#å¤„ç†ä¸€æ¬¡çŒœæµ‹" name="å¤„ç†ä¸€æ¬¡çŒœæµ‹"><h2>å¤„ç†ä¸€æ¬¡çŒœæµ‹</h2></a>
<p>ç¨‹åºçš„ç¬¬ä¸€éƒ¨åˆ†è¯·æ±‚å’Œå¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œå¹¶æ£€æŸ¥è¾“å…¥æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚é¦–å…ˆï¼Œéœ€è¦æœ‰ä¸€ä¸ªè®©ç©å®¶è¾“å…¥çŒœæµ‹çš„åœ°æ–¹ã€‚åœ¨ <em>src/main.rs</em> ä¸­è¾“å…¥åˆ—è¡¨ 2-1 ä¸­çš„ä»£ç ã€‚</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust,ignore">use std::io;

fn main() {
    println!(&quot;Guess the number!&quot;);

    println!(&quot;Please input your guess.&quot;);

    let mut guess = String::new();

    io::stdin().read_line(&amp;mut guess)
        .expect(&quot;Failed to read line&quot;);

    println!(&quot;You guessed: {}&quot;, guess);
}
</code></pre>
<p><span class="caption">Listing 2-1: Code to get a guess from the user and print it out</span></p>
<p>è¿™äº›ä»£ç åŒ…å«å¾ˆå¤šä¿¡æ¯ï¼Œæˆ‘ä»¬ä¸€ç‚¹ä¸€ç‚¹åœ°è¿‡ä¸€éã€‚ä¸ºäº†è·å–ç”¨æˆ·è¾“å…¥å¹¶æ‰“å°ç»“æœä½œä¸ºè¾“å‡ºï¼Œæˆ‘ä»¬éœ€è¦å°† <code>io</code>ï¼ˆè¾“å…¥/è¾“å‡ºï¼‰åº“å¼•å…¥å½“å‰ä½œç”¨åŸŸã€‚<code>io</code>åº“æ¥è‡ªäºæ ‡å‡†åº“ï¼ˆä¹Ÿè¢«ç§°ä¸º<code>std</code>ï¼‰ï¼š</p>
<pre><code class="language-rust,ignore">use std::io;
</code></pre>
<p>Rust é»˜è®¤åªåœ¨æ¯ä¸ªç¨‹åºçš„ <a href="https://doc.rust-lang.org/std/prelude/index.html"><em>prelude</em></a><!-- ignore --> ä¸­å¼•å…¥å°‘é‡ç±»å‹ã€‚å¦‚æœéœ€è¦çš„ç±»å‹ä¸åœ¨ prelude ä¸­ï¼Œä½ å¿…é¡»ä½¿ç”¨ä¸€ä¸ª <code>use</code> è¯­å¥æ˜¾å¼çš„å°†å…¶å¼•å…¥ä½œç”¨åŸŸã€‚<code>std::io</code> åº“æä¾›å¾ˆå¤š <code>io</code> ç›¸å…³çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ¥å—ç”¨æˆ·è¾“å…¥ã€‚</p>
<p>å¦‚ç¬¬ä¸€ç« æ‰€æåŠï¼Œ<code>main</code> å‡½æ•°æ˜¯ç¨‹åºçš„å…¥å£ç‚¹ï¼š</p>
<pre><code class="language-rust,ignore">fn main() {
</code></pre>
<p><code>fn</code> è¯­æ³•å£°æ˜äº†ä¸€ä¸ªæ–°å‡½æ•°ï¼Œ<code>()</code> è¡¨æ˜æ²¡æœ‰å‚æ•°ï¼Œ<code>{</code> ä½œä¸ºå‡½æ•°ä½“çš„å¼€å§‹ã€‚</p>
<p>ç¬¬ä¸€ç« ä¹ŸæåŠï¼Œ<code>println!</code> æ˜¯ä¸€ä¸ªåœ¨å±å¹•ä¸Šæ‰“å°å­—ç¬¦ä¸²çš„å®ï¼š</p>
<pre><code class="language-rust,ignore">println!(&quot;Guess the number!&quot;);

println!(&quot;Please input your guess.&quot;);
</code></pre>
<p>è¿™äº›ä»£ç ä»…ä»…æ‰“å°æç¤ºï¼Œä»‹ç»æ¸¸æˆçš„å†…å®¹ç„¶åè¯·ç”¨æˆ·è¾“å…¥ã€‚</p>
<a class="header" href="#ç”¨å˜é‡å‚¨å­˜å€¼" name="ç”¨å˜é‡å‚¨å­˜å€¼"><h3>ç”¨å˜é‡å‚¨å­˜å€¼</h3></a>
<p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªåœ°æ–¹å‚¨å­˜ç”¨æˆ·è¾“å…¥ï¼Œåƒè¿™æ ·ï¼š</p>
<pre><code class="language-rust">let mut guess = String::new();
</code></pre>
<p>ç°åœ¨ç¨‹åºå¼€å§‹å˜å¾—æœ‰æ„æ€äº†ï¼è¿™ä¸€å°è¡Œä»£ç å‘ç”Ÿäº†å¾ˆå¤šäº‹ã€‚æ³¨æ„è¿™æ˜¯ä¸€ä¸ª <code>let</code> è¯­å¥ï¼Œç”¨æ¥åˆ›å»º<strong>å˜é‡</strong>ã€‚è¿™é‡Œæ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="language-rust">let foo = bar;
</code></pre>
<p>è¿™è¡Œä»£ç ä¼šåˆ›å»ºä¸€ä¸ªå«åš <code>foo</code> çš„æ–°å˜é‡å¹¶æŠŠå®ƒç»‘å®šåˆ°å€¼ <code>bar</code> ä¸Šã€‚åœ¨ Rust ä¸­ï¼Œå˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•åœ¨å˜é‡åå‰ä½¿ç”¨ <code>mut</code> æ¥ä½¿ä¸€ä¸ªå˜é‡å¯å˜ï¼š</p>
<pre><code class="language-rust">let foo = 5; // immutable
let mut bar = 5; // mutable
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š<code>//</code> å¼€å§‹ä¸€ä¸ªæ³¨é‡Šï¼Œå®ƒæŒç»­åˆ°æœ¬è¡Œçš„ç»“å°¾ã€‚Rust å¿½ç•¥æ³¨é‡Šä¸­çš„æ‰€æœ‰å†…å®¹ã€‚</p>
</blockquote>
<p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº† <code>let mut guess</code> ä¼šå¼•å…¥ä¸€ä¸ªå«åš <code>guess</code> çš„å¯å˜å˜é‡ã€‚ç­‰å·ï¼ˆ<code>=</code>ï¼‰çš„å³è¾¹æ˜¯ <code>guess</code> æ‰€ç»‘å®šçš„å€¼ï¼Œå®ƒæ˜¯ <code>String::new</code> çš„ç»“æœï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ª <code>String</code> çš„æ–°å®ä¾‹ã€‚<a href="https://doc.rust-lang.org/std/string/struct.String.html"><code>String</code></a><!-- ignore --> æ˜¯ä¸€ä¸ªæ ‡å‡†åº“æä¾›çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œå®ƒæ˜¯ UTF-8 ç¼–ç çš„å¯å¢é•¿æ–‡æœ¬å—ã€‚</p>
<p><code>::new</code> é‚£ä¸€è¡Œçš„ <code>::</code> è¯­æ³•è¡¨æ˜ <code>new</code> æ˜¯ <code>String</code> ç±»å‹çš„ä¸€ä¸ª <strong>å…³è”å‡½æ•°</strong>ï¼ˆ<em>associated function</em>ï¼‰ã€‚å…³è”å‡½æ•°æ˜¯é’ˆå¯¹ç±»å‹å®ç°çš„ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ <code>String</code>ï¼Œè€Œä¸æ˜¯ <code>String</code> çš„æŸä¸ªç‰¹å®šå®ä¾‹ã€‚ä¸€äº›è¯­è¨€ä¸­æŠŠå®ƒç§°ä¸º<strong>é™æ€æ–¹æ³•</strong>ï¼ˆ<em>static method</em>ï¼‰ã€‚</p>
<p><code>new</code> å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç©º <code>String</code>ï¼Œä½ ä¼šåœ¨å¾ˆå¤šç±»å‹ä¸Šå‘ç°<code>new</code> å‡½æ•°ï¼Œè¿™æ˜¯åˆ›å»ºç±»å‹å®ä¾‹çš„æƒ¯ç”¨å‡½æ•°åã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œ<code>let mut guess = String::new();</code> è¿™ä¸€è¡Œåˆ›å»ºäº†ä¸€ä¸ªå¯å˜å˜é‡ï¼Œç»‘å®šåˆ°ä¸€ä¸ªæ–°çš„ <code>String</code> ç©ºå®ä¾‹ä¸Šã€‚</p>
<p>å›å¿†ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨ç¨‹åºçš„ç¬¬ä¸€è¡Œä½¿ç”¨ <code>use std::io;</code> ä»æ ‡å‡†åº“ä¸­å¼•å…¥â€œè¾“å…¥è¾“å‡ºâ€ã€‚ç°åœ¨è°ƒç”¨ <code>io</code> çš„å…³è”å‡½æ•° <code>stdin</code>ï¼š</p>
<pre><code class="language-rust,ignore">io::stdin().read_line(&amp;mut guess)
    .expect(&quot;Failed to read line&quot;);
</code></pre>
<p>å¦‚æœç¨‹åºçš„å¼€å¤´æ²¡æœ‰ <code>use std::io</code> è¿™ä¸€è¡Œï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°è°ƒç”¨å†™æˆ <code>std::io::stdin</code>ã€‚<code>stdin</code> å‡½æ•°è¿”å›ä¸€ä¸ª  <a href="https://doc.rust-lang.org/std/io/struct.Stdin.html"><code>std::io::Stdin</code></a><!-- ignore --> çš„å®ä¾‹ï¼Œè¿™ä»£è¡¨ç»ˆç«¯æ ‡å‡†è¾“å…¥å¥æŸ„çš„ç±»å‹ã€‚</p>
<p>ä»£ç çš„ä¸‹ä¸€éƒ¨åˆ†ï¼Œ<code>.read_line(&amp;mut guess)</code>ï¼Œè°ƒç”¨ <a href="https://doc.rust-lang.org/std/io/struct.Stdin.html#method.read_line"><code>read_line</code></a><!-- ignore --> æ–¹æ³•ä»æ ‡å‡†è¾“å…¥å¥æŸ„è·å–ç”¨æˆ·è¾“å…¥ã€‚æˆ‘ä»¬è¿˜å‘ <code>read_line()</code> ä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼š<code>&amp;mut guess</code>ã€‚</p>
<p><code>read_line</code> çš„å·¥ä½œæ˜¯ï¼Œæ— è®ºç”¨æˆ·åœ¨æ ‡å‡†è¾“å…¥ä¸­é”®å…¥ä»€ä¹ˆå†…å®¹ï¼Œéƒ½å°†å…¶å­˜å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œå› æ­¤å®ƒéœ€è¦å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªå­—ç¬¦ä¸²å‚æ•°åº”è¯¥æ˜¯å¯å˜çš„ï¼Œä»¥ä¾¿ <code>read_line</code> å°†ç”¨æˆ·è¾“å…¥é™„åŠ ä¸Šå»ã€‚</p>
<p><code>&amp;</code> è¡¨ç¤ºè¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª<strong>å¼•ç”¨</strong>ï¼ˆ<em>reference</em>ï¼‰ï¼Œå®ƒå…è®¸å¤šå¤„ä»£ç è®¿é—®åŒä¸€å¤„æ•°æ®ï¼Œè€Œæ— éœ€åœ¨å†…å­˜ä¸­å¤šæ¬¡æ‹·è´ã€‚å¼•ç”¨æ˜¯ä¸€ä¸ªå¤æ‚çš„ç‰¹æ€§ï¼ŒRust çš„ä¸€ä¸ªä¸»è¦ä¼˜åŠ¿å°±æ˜¯å®‰å…¨è€Œç®€å•çš„æ“çºµå¼•ç”¨ã€‚å®Œæˆå½“å‰ç¨‹åºå¹¶ä¸éœ€è¦äº†è§£å¦‚æ­¤å¤šç»†èŠ‚ï¼šç¬¬å››ç« ä¼šæ›´å…¨é¢çš„è§£é‡Šå¼•ç”¨ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€çŸ¥é“å®ƒåƒå˜é‡ä¸€æ ·ï¼Œé»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼Œéœ€è¦å†™æˆ <code>&amp;mut guess</code> è€Œä¸æ˜¯ <code>&amp;guess</code> æ¥ä½¿å…¶å¯å˜ã€‚</p>
<p>æˆ‘ä»¬è¿˜æ²¡æœ‰åˆ†æå®Œè¿™è¡Œä»£ç ã€‚è™½ç„¶è¿™æ˜¯å•ç‹¬ä¸€è¡Œä»£ç ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªé€»è¾‘è¡Œï¼ˆè™½ç„¶æ¢è¡Œäº†ä½†ä»æ˜¯ä¸€ä¸ªè¯­å¥ï¼‰çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯è¿™ä¸ªæ–¹æ³•ï¼š</p>
<pre><code class="language-rust">.expect(&quot;Failed to read line&quot;);
</code></pre>
<p>å½“ä½¿ç”¨ <code>.expect()</code> è¯­æ³•è°ƒç”¨æ–¹æ³•æ—¶ï¼Œé€šè¿‡â€˜æ¢è¡Œå¹¶ç¼©è¿›â€™æ¥æŠŠé•¿è¡Œæ‹†å¼€ï¼Œæ˜¯æ˜æ™ºçš„ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="language-rust">io::stdin().read_line(&amp;mut guess).expect(&quot;Failed to read line&quot;);
</code></pre>
<p>ä¸è¿‡ï¼Œè¿‡é•¿çš„è¡Œéš¾ä»¥é˜…è¯»ï¼Œæ‰€ä»¥æœ€å¥½æ‹†å¼€æ¥å†™ï¼Œä¸¤è¡Œä»£ç ä¸¤ä¸ªæ–¹æ³•è°ƒç”¨ã€‚ç°åœ¨æ¥çœ‹çœ‹è¿™è¡Œä»£ç å¹²äº†ä»€ä¹ˆã€‚</p>
<a class="header" href="#ä½¿ç”¨-result-ç±»å‹æ¥å¤„ç†æ½œåœ¨çš„é”™è¯¯" name="ä½¿ç”¨-result-ç±»å‹æ¥å¤„ç†æ½œåœ¨çš„é”™è¯¯"><h3>ä½¿ç”¨ <code>Result</code> ç±»å‹æ¥å¤„ç†æ½œåœ¨çš„é”™è¯¯</h3></a>
<p>ä¹‹å‰æåˆ°ï¼Œ<code>read_line</code> å°†ç”¨æˆ·è¾“å…¥é™„åŠ åˆ°ä¼ é€’ç»™å®ƒå­—ç¬¦ä¸²ä¸­ï¼Œä¸è¿‡å®ƒä¹Ÿè¿”å›ä¸€ä¸ªå€¼â€”â€”åœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ <a href="https://doc.rust-lang.org/std/io/type.Result.html"><code>io::Result</code></a><!-- ignore -->ã€‚Rust æ ‡å‡†åº“ä¸­æœ‰å¾ˆå¤šå«åš <code>Result</code> çš„ç±»å‹ã€‚ä¸€ä¸ª <a href="https://doc.rust-lang.org/std/result/enum.Result.html"><code>Result</code></a><!-- ignore --> æ³›å‹ä»¥åŠå¯¹åº”å­æ¨¡å—çš„ç‰¹å®šç‰ˆæœ¬ï¼Œæ¯”å¦‚ <code>io::Result</code>ã€‚</p>
<p><code>Result</code> ç±»å‹æ˜¯ <a href="ch06-00-enums.html"><em>æšä¸¾</em>ï¼ˆ<em>enumerations</em>ï¼‰</a><!-- ignore -->ï¼Œé€šå¸¸ä¹Ÿå†™ä½œ <em>enums</em>ã€‚æšä¸¾ç±»å‹æŒæœ‰å›ºå®šé›†åˆçš„å€¼ï¼Œè¿™äº›å€¼è¢«ç§°ä¸ºæšä¸¾çš„<strong>æˆå‘˜</strong>ï¼ˆ<em>variants</em>ï¼‰ã€‚ç¬¬å…­ç« å°†ä»‹ç»æšä¸¾çš„æ›´å¤šç»†èŠ‚ã€‚</p>
<p>å¯¹äº <code>Result</code>ï¼Œå®ƒçš„æˆå‘˜æ˜¯ <code>Ok</code> æˆ– <code>Err</code>ï¼Œ<code>Ok</code> è¡¨ç¤ºæ“ä½œæˆåŠŸï¼Œå†…éƒ¨åŒ…å«äº§ç”Ÿçš„å€¼ã€‚<code>Err</code> æ„å‘³ç€æ“ä½œå¤±è´¥ï¼ŒåŒ…å«å¤±è´¥çš„å‰å› åæœã€‚</p>
<p><code>Result</code> ç±»å‹çš„ä½œç”¨æ˜¯ç¼–ç é”™è¯¯å¤„ç†ä¿¡æ¯ã€‚<code>Result</code> ç±»å‹çš„å€¼ï¼Œåƒå…¶ä»–ç±»å‹ä¸€æ ·ï¼Œæ‹¥æœ‰å®šä¹‰äºå…¶ä¸Šçš„æ–¹æ³•ã€‚<code>io::Result</code> çš„å®ä¾‹æ‹¥æœ‰<a href="https://doc.rust-lang.org/std/result/enum.Result.html#method.expect"><code>expect</code>æ–¹æ³•</a><!-- ignore -->ï¼Œå¦‚æœå®ä¾‹çš„å€¼æ˜¯ <code>Err</code>ï¼Œ<code>expect</code> ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œå¹¶æ˜¾ç¤ºå½“åšå‚æ•°ä¼ é€’ç»™ <code>expect</code> çš„ä¿¡æ¯;å¦‚æœå®ä¾‹çš„å€¼æ˜¯ <code>Ok</code>ï¼Œ<code>expect</code> ä¼šè·å– <code>Ok</code> ä¸­çš„å€¼å¹¶åŸæ ·è¿”å›ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œè¿™ä¸ªå€¼æ˜¯ç”¨æˆ·è¾“å…¥åˆ°æ ‡å‡†è¾“å…¥ä¸­çš„å­—èŠ‚çš„æ•°é‡ã€‚</p>
<p>å¦‚æœä¸ä½¿ç”¨ <code>expect</code>ï¼Œç¨‹åºä¹Ÿèƒ½ç¼–è¯‘ï¼Œä¸è¿‡ä¼šå‡ºç°ä¸€ä¸ªè­¦å‘Šï¼š</p>
<pre><code>$ cargo build
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
src/main.rs:10:5: 10:39 warning: unused result which must be used,
#[warn(unused_must_use)] on by default
src/main.rs:10     io::stdin().read_line(&amp;mut guess);
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</code></pre>
<p>Rust è­¦å‘Šæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ <code>read_line</code> çš„è¿”å›å€¼ <code>Result</code>ï¼Œè¯´æ˜æœ‰ä¸€ä¸ªå¯èƒ½çš„é”™è¯¯æ²¡å¤„ç†ã€‚æƒ³æ¶ˆé™¤è­¦å‘Šï¼Œå°±è€å®çš„å†™é”™è¯¯å¤„ç†ï¼Œä¸è¿‡æˆ‘ä»¬å°±æ˜¯å¸Œæœ›ç¨‹åºåœ¨å‡ºç°é—®é¢˜æ—¶ç«‹å³å´©æºƒï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨ <code>expect</code>ã€‚ç¬¬ä¹ç« ä¼šå­¦ä¹ å¦‚ä½•ä»é”™è¯¯ä¸­æ¢å¤ã€‚</p>
<a class="header" href="#ä½¿ç”¨-println-å ä½ç¬¦æ‰“å°å€¼" name="ä½¿ç”¨-println-å ä½ç¬¦æ‰“å°å€¼"><h3>ä½¿ç”¨ <code>println!</code> å ä½ç¬¦æ‰“å°å€¼</h3></a>
<p>é™¤äº†ä½äºç»“å°¾çš„å¤§æ‹¬å·ï¼Œç›®å‰ä¸ºæ­¢å°±åªæœ‰ä¸€è¡Œä»£ç å€¼å¾—è®¨è®ºä¸€ä¸‹äº†ï¼Œå°±æ˜¯è¿™ä¸€è¡Œï¼š</p>
<pre><code class="language-rust">println!(&quot;You guessed: {}&quot;, guess);
</code></pre>
<p>è¿™è¡Œä»£ç æ‰“å°å­˜å‚¨ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œé‡Œé¢çš„ <code>{}</code> æ˜¯é¢„ç•™åœ¨ç‰¹å®šä½ç½®çš„å ä½ç¬¦ã€‚ä½¿ç”¨å ä½ç¬¦ä¹Ÿå¯ä»¥æ‰“å°å¤šä¸ªå€¼ï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªå ä½ç¬¦å¯¹åº”ç¬¬äºŒä¸ªå‚æ•°å€¼ï¼Œç¬¬äºŒä¸ªå ä½ç¬¦å¯¹åº”ç¬¬ä¸‰ä¸ªå‚æ•°å€¼ï¼Œä»¥æ­¤ç±»æ¨ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²æœ¬èº«ï¼‰ã€‚è°ƒç”¨ä¸€æ¬¡ <code>println!</code> æ‰“å°å¤šä¸ªå€¼çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<pre><code class="language-rust">let x = 5;
let y = 10;

println!(&quot;x = {} and y = {}&quot;, x, y);
</code></pre>
<p>è¿™è¡Œä»£ç ä¼šæ‰“å°å‡º <code>x = 5 and y = 10</code>ã€‚</p>
<a class="header" href="#æµ‹è¯•ç¬¬ä¸€éƒ¨åˆ†ä»£ç " name="æµ‹è¯•ç¬¬ä¸€éƒ¨åˆ†ä»£ç "><h3>æµ‹è¯•ç¬¬ä¸€éƒ¨åˆ†ä»£ç </h3></a>
<p>è®©æˆ‘ä»¬æ¥æµ‹è¯•ä¸‹çŒœçŒœçœ‹æ¸¸æˆçš„ç¬¬ä¸€éƒ¨åˆ†ã€‚ä½¿ç”¨<code>cargo run</code>è¿è¡Œå®ƒï¼š</p>
<pre><code class="language-sh">$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
     Running `target/debug/guessing_game`
Guess the number!
Please input your guess.
6
You guessed: 6
</code></pre>
<p>è‡³æ­¤ä¸ºæ­¢ï¼Œæ¸¸æˆçš„ç¬¬ä¸€éƒ¨åˆ†å·²ç»å®Œæˆï¼šæˆ‘ä»¬ä»é”®ç›˜è·å–è¾“å…¥å¹¶æ‰“å°äº†å‡ºæ¥ã€‚</p>
<a class="header" href="#ç”Ÿæˆä¸€ä¸ªç§˜å¯†æ•°å­—" name="ç”Ÿæˆä¸€ä¸ªç§˜å¯†æ•°å­—"><h2>ç”Ÿæˆä¸€ä¸ªç§˜å¯†æ•°å­—</h2></a>
<p>æ¥ä¸‹æ¥ï¼Œéœ€è¦ç”Ÿæˆä¸€ä¸ªç§˜å¯†æ•°å­—ï¼Œå¥½è®©ç”¨æˆ·æ¥çŒœã€‚ç§˜å¯†æ•°å­—åº”è¯¥æ¯æ¬¡éƒ½ä¸åŒï¼Œè¿™æ ·é‡å¤ç©æ‰ä¸ä¼šä¹å‘³ï¼›èŒƒå›´åº”è¯¥åœ¨ 1 åˆ° 100 ä¹‹é—´ï¼Œè¿™æ ·æ‰ä¸ä¼šå¤ªå›°éš¾ã€‚Rust æ ‡å‡†åº“ä¸­å°šæœªåŒ…å«éšæœºæ•°åŠŸèƒ½ã€‚ç„¶è€Œï¼ŒRust å›¢é˜Ÿè¿˜æ˜¯æä¾›äº†ä¸€ä¸ª <a href="https://crates.io/crates/rand"><code>rand</code> crate</a>ã€‚</p>
<a class="header" href="#ä½¿ç”¨-crate-æ¥å¢åŠ æ›´å¤šåŠŸèƒ½" name="ä½¿ç”¨-crate-æ¥å¢åŠ æ›´å¤šåŠŸèƒ½"><h3>ä½¿ç”¨ crate æ¥å¢åŠ æ›´å¤šåŠŸèƒ½</h3></a>
<p>è®°ä½ <em>crate</em> æ˜¯ä¸€ä¸ª Rust ä»£ç çš„åŒ…ã€‚æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„é¡¹ç›®æ˜¯ä¸€ä¸ª<strong>äºŒè¿›åˆ¶ crate</strong>ï¼Œå®ƒç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚ <code>rand</code> crate æ˜¯ä¸€ä¸ª <strong>åº“ crate</strong>ï¼Œåº“ crate å¯ä»¥åŒ…å«ä»»æ„èƒ½è¢«å…¶ä»–ç¨‹åºä½¿ç”¨çš„ä»£ç ã€‚</p>
<p>Cargo å¯¹å¤–éƒ¨ crate çš„è¿ç”¨æ˜¯äº®ç‚¹ã€‚åœ¨æˆ‘ä»¬ä½¿ç”¨ <code>rand</code> ç¼–å†™ä»£ç ä¹‹å‰ï¼Œéœ€è¦ç¼–è¾‘ <em>Cargo.toml</em> ï¼Œå£°æ˜ <code>rand</code> ä½œä¸ºä¸€ä¸ªä¾èµ–ã€‚ç°åœ¨æ‰“å¼€è¿™ä¸ªæ–‡ä»¶å¹¶åœ¨ <code>[dependencies]</code> æ ‡é¢˜ï¼ˆCargo ä¸ºä½ åˆ›å»ºäº†å®ƒï¼‰ä¹‹ä¸‹æ·»åŠ ï¼š</p>
<p><span class="filename">Filename: Cargo.toml</span></p>
<pre><code class="language-toml">[dependencies]

rand = &quot;0.3.14&quot;
</code></pre>
<p>åœ¨ <em>Cargo.toml</em> æ–‡ä»¶ä¸­ï¼Œæ ‡é¢˜ä»¥åŠä¹‹åçš„å†…å®¹å±åŒä¸€ä¸ªæ®µè½ï¼Œé‡åˆ°ä¸‹ä¸€ä¸ªæ ‡é¢˜åˆ™å¼€å§‹æ–°çš„æ®µè½ã€‚<code>[dependencies]</code> éƒ¨åˆ†å‘Šè¯‰ Cargo æœ¬é¡¹ç›®ä¾èµ–äº†å“ªäº›å¤–éƒ¨ crate åŠå…¶ç‰ˆæœ¬ã€‚æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ <code>0.3.14</code> æ¥æŒ‡å®š <code>rand</code> crateã€‚Cargo ç†è§£<a href="http://semver.org">è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰</a><!-- ignore -->ï¼ˆæœ‰æ—¶ä¹Ÿç§°ä¸º <em>SemVer</em>ï¼‰ï¼Œæ˜¯ä¸€ç§å®šä¹‰ç‰ˆæœ¬å·çš„æ ‡å‡†ã€‚<code>0.3.14</code> äº‹å®ä¸Šæ˜¯ <code>^0.3.14</code> çš„ç®€å†™ï¼Œå®ƒè¡¨ç¤ºâ€œä»»ä½•ä¸ 0.3.14 ç‰ˆæœ¬å…¬æœ‰ API ç›¸å…¼å®¹çš„ç‰ˆæœ¬â€ã€‚</p>
<p>ç°åœ¨ï¼Œä¸ä¿®æ”¹ä»»ä½•ä»£ç ï¼Œæ„å»ºé¡¹ç›®ï¼Œå¦‚åˆ—è¡¨ 2-2 æ‰€ç¤ºï¼š</p>
<pre><code>$ cargo build
    Updating registry `https://github.com/rust-lang/crates.io-index`
 Downloading rand v0.3.14
 Downloading libc v0.2.14
   Compiling libc v0.2.14
   Compiling rand v0.3.14
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
</code></pre>
<p><span class="caption">Listing 2-2: The output from running <code>cargo build</code> after
adding the rand crate as a dependency</span></p>
<p>å¯èƒ½ä¼šå‡ºç°ä¸åŒçš„ç‰ˆæœ¬å·ï¼ˆå¤šäºäº†è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼Œå®ƒä»¬ä¸ä»£ç æ˜¯å…¼å®¹çš„ï¼ï¼‰ï¼ŒåŒæ—¶æ˜¾ç¤ºé¡ºåºä¹Ÿå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå¤–éƒ¨ä¾èµ–ï¼ŒCargo ä» <em>registry</em> ï¼ˆ<a href="https://crates.io">Crates.io</a>ï¼‰ä¸Šè·å–äº†ä¸€ä»½ï¼ˆå…¼å®¹çš„ï¼‰æœ€æ–°ç‰ˆæœ¬çš„ä»£ç ã€‚Crates.io æ˜¯ Rust ç”Ÿæ€ç¯å¢ƒä¸­çš„å¼€å‘è€…ä»¬å‘ä»–äººè´¡çŒ® Rust å¼€æºé¡¹ç›®çš„åœ°æ–¹ã€‚</p>
<p>åœ¨æ›´æ–°å®Œ registry ï¼ˆç´¢å¼•ï¼‰åï¼ŒCargo æ£€æŸ¥ <code>[dependencies]</code> æ®µè½å¹¶ä¸‹è½½ç¼ºå¤±çš„éƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­ï¼Œåªå£°æ˜äº† <code>rand</code> ä¸€ä¸ªä¾èµ–ï¼Œç„¶è€Œ Cargo è¿˜æ˜¯é¢å¤–è·å–äº† <code>libc</code>ï¼Œå› ä¸º <code>rand</code> ä¾èµ– <code>libc</code> æ¥æ­£å¸¸å·¥ä½œã€‚ä¸‹è½½å®Œæˆåï¼ŒRust ç¼–è¯‘ä¾èµ–ï¼Œç„¶åä½¿ç”¨è¿™äº›ä¾èµ–ç¼–è¯‘é¡¹ç›®ã€‚</p>
<p>å¦‚æœä¸åšä»»ä½•ä¿®æ”¹ï¼Œç«‹åˆ»å†æ¬¡è¿è¡Œ <code>cargo build</code>ï¼Œåˆ™ä¸ä¼šæœ‰ä»»ä½•è¾“å‡ºã€‚Cargo çŸ¥é“å®ƒå·²ç»ä¸‹è½½å¹¶ç¼–è¯‘äº†ä¾èµ–ï¼ŒåŒæ—¶ <em>Cargo.toml</em> æ–‡ä»¶ä¹Ÿæ²¡æœ‰å˜åŠ¨ï¼Œå¹¶ä¸”ä»£ç ä¹Ÿæ²¡æœ‰ä»»ä½•ä¿®æ”¹ï¼Œæ‰€ä»¥å®ƒä¸ä¼šé‡æ–°ç¼–è¯‘ä»£ç ã€‚å› ä¸ºæ— äº‹å¯åšï¼Œå®ƒç®€å•çš„é€€å‡ºäº†ã€‚å¦‚æœæ‰“å¼€ <em>src/main.rs</em> æ–‡ä»¶ï¼Œåšä¸€äº›æ™®é€šçš„ä¿®æ”¹ï¼Œä¿å­˜å¹¶å†æ¬¡æ„å»ºï¼Œåªä¼šå‡ºç°ä¸€è¡Œè¾“å‡ºï¼š</p>
<pre><code>$ cargo build
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
</code></pre>
<p>è¿™ä¸€è¡Œè¡¨ç¤º Cargo åªé’ˆå¯¹ <em>src/main.rs</em> æ–‡ä»¶çš„å¾®å°ä¿®æ”¹è€Œæ„å»ºã€‚ä¾èµ–æ²¡æœ‰å˜åŒ–ï¼Œæ‰€ä»¥ Cargo ä¼šå¤ç”¨å·²ç»ä¸ºæ­¤ä¸‹è½½å¹¶ç¼–è¯‘çš„ä»£ç ã€‚å®ƒåªæ˜¯é‡æ–°æ„å»ºäº†éƒ¨åˆ†ï¼ˆé¡¹ç›®ï¼‰ä»£ç ã€‚</p>
<a class="header" href="#cargolock-æ–‡ä»¶ç¡®ä¿æ„å»ºæ˜¯å¯é‡ç°çš„" name="cargolock-æ–‡ä»¶ç¡®ä¿æ„å»ºæ˜¯å¯é‡ç°çš„"><h4><em>Cargo.lock</em> æ–‡ä»¶ç¡®ä¿æ„å»ºæ˜¯å¯é‡ç°çš„</h4></a>
<p>Cargo æœ‰ä¸€ä¸ªæœºåˆ¶æ¥ç¡®ä¿ä»»ä½•äººåœ¨ä»»ä½•æ—¶å€™é‡æ–°æ„å»ºä»£ç ï¼Œéƒ½ä¼šäº§ç”Ÿç›¸åŒçš„ç»“æœï¼šCargo åªä¼šä½¿ç”¨ä½ æŒ‡å®šçš„ä¾èµ–çš„ç‰ˆæœ¬ï¼Œé™¤éä½ åˆæ‰‹åŠ¨æŒ‡å®šäº†åˆ«çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸‹å‘¨ <code>rand</code> crate çš„ <code>v0.3.15</code> ç‰ˆæœ¬å‡ºæ¥äº†ï¼Œå®ƒä¿®å¤äº†ä¸€ä¸ªé‡è¦çš„ bugï¼ŒåŒæ—¶ä¹Ÿå«æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œä¼šç ´åä»£ç çš„è¿è¡Œï¼Œè¿™æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ <em>Cargo.lock</em> æ–‡ä»¶ã€‚å®ƒåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œ <code>cargo build</code> æ—¶åˆ›å»ºï¼Œå¹¶æ”¾åœ¨ <em>guessing_game</em> ç›®å½•ï¼ŒCargo è®¡ç®—å‡ºæ‰€æœ‰ç¬¦åˆè¦æ±‚çš„ä¾èµ–ç‰ˆæœ¬å¹¶å†™å…¥ <em>Cargo.lock</em> æ–‡ä»¶ã€‚å½“å°†æ¥æ„å»ºé¡¹ç›®æ—¶ï¼Œå¦‚æœ <em>Cargo.lock</em> å­˜åœ¨ï¼ŒCargo å°±ä½¿ç”¨é‡Œé¢æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œä¸ä¼šé‡æ–°è®¡ç®—ã€‚è‡ªåŠ¨ä½¿ä½ æ‹¥æœ‰äº†ä¸€ä¸ªå¯é‡ç°çš„æ„å»ºã€‚æ¢å¥è¯è¯´ï¼Œé¡¹ç›®ä¼šç»§ç»­ä½¿ç”¨ <code>0.3.14</code> ç›´åˆ°ä½ æ˜¾å¼å‡çº§ï¼Œæ„Ÿè°¢ <em>Cargo.lock</em>ã€‚</p>
<a class="header" href="#æ›´æ–°-crate-åˆ°ä¸€ä¸ªæ–°ç‰ˆæœ¬" name="æ›´æ–°-crate-åˆ°ä¸€ä¸ªæ–°ç‰ˆæœ¬"><h4>æ›´æ–° crate åˆ°ä¸€ä¸ªæ–°ç‰ˆæœ¬</h4></a>
<p>å½“ä½ <strong>ç¡®å®</strong>éœ€è¦å‡çº§ crate æ—¶ï¼ŒCargo æä¾›äº†å¦ä¸€ä¸ªå‘½ä»¤ï¼Œ<code>update</code>ï¼Œä»–ä¼šï¼š</p>
<ol>
<li>å¿½ç•¥ <em>Cargo.lock</em> æ–‡ä»¶ï¼Œå¹¶è®¡ç®—å‡ºæ‰€æœ‰ç¬¦åˆ <em>Cargo.toml</em> å£°æ˜çš„æœ€æ–°ç‰ˆæœ¬ã€‚</li>
<li>å¦‚æœæˆåŠŸäº†ï¼ŒCargo ä¼šæŠŠè¿™äº›ç‰ˆæœ¬å†™å…¥ <em>Cargo.lock</em> æ–‡ä»¶ã€‚</li>
</ol>
<p>ä¸è¿‡ï¼ŒCargo é»˜è®¤åªä¼šå¯»æ‰¾å¤§äº <code>0.3.0</code> è€Œå°äº <code>0.4.0</code> çš„ç‰ˆæœ¬ã€‚å¦‚æœ <code>rand</code> crate å‘å¸ƒäº†ä¸¤ä¸ªæ–°ç‰ˆæœ¬ï¼Œ<code>0.3.15</code> å’Œ <code>0.4.0</code>ï¼Œåœ¨è¿è¡Œ <code>cargo update</code> æ—¶ä¼šå‡ºç°å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code>$ cargo update
    Updating registry `https://github.com/rust-lang/crates.io-index`
    Updating rand v0.3.14 -&gt; v0.3.15
</code></pre>
<p>è¿™æ—¶ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ <em>Cargo.lock</em> æ–‡ä»¶ä¸­çš„ä¸€ä¸ªæ”¹å˜ï¼Œ<code>rand</code> crate ç°åœ¨ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯<code>0.3.15</code>ã€‚</p>
<p>å¦‚æœæƒ³è¦ä½¿ç”¨ <code>0.4.0</code> ç‰ˆæœ¬çš„ <code>rand</code> æˆ–æ˜¯ä»»ä½• <code>0.4.x</code> ç³»åˆ—çš„ç‰ˆæœ¬ï¼Œå¿…é¡»åƒè¿™æ ·æ›´æ–° <em>Cargo.toml</em> æ–‡ä»¶ï¼š</p>
<pre><code class="language-toml">[dependencies]

rand = &quot;0.4.0&quot;
</code></pre>
<p>ä¸‹ä¸€æ¬¡è¿è¡Œ <code>cargo build</code> æ—¶ï¼ŒCargo ä¼šä» registry æ›´æ–°ï¼Œå¹¶æ ¹æ®ä½ æŒ‡å®šçš„æ–°ç‰ˆæœ¬é‡æ–°è®¡ç®—ã€‚</p>
<p>ç¬¬åå››ç« ä¼šè®²åˆ° <a href="http://doc.crates.io">Cargo</a><!-- ignore --> åŠå…¶<a href="http://doc.crates.io/crates-io.html">ç”Ÿæ€ç³»ç»Ÿ</a><!-- ignore -->çš„æ›´å¤šå†…å®¹ï¼Œä¸è¿‡ç›®å‰ä½ åªéœ€è¦äº†è§£è¿™ä¹ˆå¤šã€‚é€šè¿‡ Cargo å¤ç”¨åº“æ–‡ä»¶éå¸¸å®¹æ˜“ï¼Œå› æ­¤ Rustacean èƒ½å¤Ÿç¼–å†™å‡ºç”±å¾ˆå¤šåŒ…ç»„è£…è€Œæˆçš„æ›´è½»å·§çš„é¡¹ç›®ã€‚</p>
<a class="header" href="#ç”Ÿæˆä¸€ä¸ªéšæœºæ•°" name="ç”Ÿæˆä¸€ä¸ªéšæœºæ•°"><h3>ç”Ÿæˆä¸€ä¸ªéšæœºæ•°</h3></a>
<p>è®©æˆ‘ä»¬å¼€å§‹<strong>ä½¿ç”¨</strong> <code>rand</code>ã€‚ä¸‹ä¸€æ­¥æ˜¯æ›´æ–° <em>src/main.rs</em>ï¼Œå¦‚åˆ—è¡¨ 2-3 æ‰€ç¤ºï¼š</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust">extern crate rand;

use std::io;
use rand::Rng;

fn main() {
    println!(&quot;Guess the number!&quot;);

    let secret_number = rand::thread_rng().gen_range(1, 101);

    println!(&quot;The secret number is: {}&quot;, secret_number);

    println!(&quot;Please input your guess.&quot;);

    let mut guess = String::new();

    io::stdin().read_line(&amp;mut guess)
        .expect(&quot;Failed to read line&quot;);

    println!(&quot;You guessed: {}&quot;, guess);
}
</code></pre>
<p><span class="caption">Listing 2-3: Code changes needed in order to generate a
random number</span></p>
<p>æˆ‘ä»¬åœ¨é¡¶éƒ¨å¢åŠ ä¸€è¡Œ <code>extern crate rand;</code> é€šçŸ¥ Rust æˆ‘ä»¬è¦ä½¿ç”¨å¤–éƒ¨ä¾èµ–ã€‚è¿™ä¹Ÿä¼šè°ƒç”¨ç›¸åº”çš„ <code>use rand</code>ï¼Œæ‰€ä»¥ç°åœ¨å¯ä»¥ä½¿ç”¨ <code>rand::</code> å‰ç¼€æ¥è°ƒç”¨ <code>rand</code> ä¸­çš„å†…å®¹ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¢åŠ äº†ä¸€è¡Œ <code>use</code>ï¼š<code>use rand::Rng</code>ã€‚<code>Rng</code> æ˜¯ä¸€ä¸ª traitï¼Œå®ƒå®šä¹‰äº†éšæœºæ•°ç”Ÿæˆå™¨åº”å®ç°çš„æ–¹æ³• ï¼Œæƒ³ä½¿ç”¨è¿™äº›æ–¹æ³•çš„è¯æ­¤ trait å¿…é¡»åœ¨ä½œç”¨åŸŸä¸­ã€‚ç¬¬åç« ä¼šè¯¦ç»†ä»‹ç» traitã€‚</p>
<p>å¦å¤–ï¼Œä¸­é—´è¿˜æ–°å¢åŠ äº†ä¸¤è¡Œã€‚<code>rand::thread_rng</code> å‡½æ•°æä¾›å®é™…ä½¿ç”¨çš„éšæœºæ•°ç”Ÿæˆå™¨ï¼šå®ƒä½äºå½“å‰æ‰§è¡Œçº¿ç¨‹ï¼Œå¹¶ä»æ“ä½œç³»ç»Ÿè·å– seedã€‚æ¥ä¸‹æ¥ï¼Œè°ƒç”¨éšæœºæ•°ç”Ÿæˆå™¨çš„ <code>gen_range</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ç”±åˆšæ‰å¼•å…¥åˆ°ä½œç”¨åŸŸçš„ <code>Rng</code> trait å®šä¹‰ã€‚<code>gen_range</code> æ–¹æ³•è·å–ä¸¤ä¸ªæ•°å­—ä½œä¸ºå‚æ•°ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªèŒƒå›´åœ¨ä¸¤è€…ä¹‹é—´çš„éšæœºæ•°ã€‚å®ƒåŒ…å«ä¸‹é™ä½†ä¸åŒ…å«ä¸Šé™ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®š<code>1</code>å’Œ<code>101</code>æ¥è¯·æ±‚ä¸€ä¸ª<code>1</code>å’Œ<code>100</code>ä¹‹é—´çš„æ•°ã€‚</p>
<p><strong>çŸ¥é“</strong> use å“ªä¸ª trait å’Œè¯¥ä» crate ä¸­è°ƒç”¨å“ªä¸ªæ–¹æ³•å¹¶ä¸æ˜¯å…¨éƒ¨ï¼Œcrate çš„è¯´æ˜ä½äºå…¶æ–‡æ¡£ä¸­ï¼ŒCargo æœ‰ä¸€ä¸ªå¾ˆæ£’çš„åŠŸèƒ½æ˜¯ï¼šè¿è¡Œ <code>cargo doc --open</code> å‘½ä»¤æ¥æ„å»ºæ‰€æœ‰æœ¬åœ°ä¾èµ–æä¾›çš„æ–‡æ¡£ï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ å¯¹ <code>rand</code> crate ä¸­çš„å…¶ä»–åŠŸèƒ½æ„Ÿå…´è¶£ï¼Œ<code>cargo doc --open</code> å¹¶ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ ä¸­çš„ <code>rand</code>ã€‚</p>
<p>æ–°å¢åŠ çš„ç¬¬äºŒè¡Œä»£ç æ‰“å°å‡ºäº†ç§˜å¯†æ•°å­—ã€‚è¿™åœ¨å¼€å‘ç¨‹åºæ—¶å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥å»æµ‹è¯•å®ƒï¼Œä¸è¿‡åœ¨æœ€ç»ˆç‰ˆæœ¬æˆ‘ä»¬ä¼šåˆ æ‰å®ƒã€‚æ¸¸æˆä¸€å¼€å§‹å°±æ‰“å°å‡ºç»“æœå°±æ²¡ä»€ä¹ˆå¯ç©çš„äº†ï¼</p>
<p>å°è¯•è¿è¡Œç¨‹åºå‡ æ¬¡ï¼š</p>
<pre><code>$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 7
Please input your guess.
4
You guessed: 4
$ cargo run
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 83
Please input your guess.
5
You guessed: 5
</code></pre>
<p>ä½ åº”è¯¥èƒ½å¾—åˆ°ä¸åŒçš„éšæœºæ•°ï¼ŒåŒæ—¶ä»–ä»¬åº”è¯¥éƒ½æ˜¯åœ¨ 1 å’Œ 100 ä¹‹é—´çš„ã€‚å¹²å¾—æ¼‚äº®ï¼</p>
<a class="header" href="#æ¯”è¾ƒçŒœæµ‹ä¸ç§˜å¯†æ•°å­—" name="æ¯”è¾ƒçŒœæµ‹ä¸ç§˜å¯†æ•°å­—"><h2>æ¯”è¾ƒçŒœæµ‹ä¸ç§˜å¯†æ•°å­—</h2></a>
<p>ç°åœ¨æœ‰äº†ç”¨æˆ·è¾“å…¥å’Œä¸€ä¸ªéšæœºæ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ¯”è¾ƒä»–ä»¬ã€‚è¿™ä¸ªæ­¥éª¤å¦‚åˆ—è¡¨ 2-4 æ‰€ç¤ºï¼š</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust">extern crate rand;

use std::io;
use std::cmp::Ordering;
use rand::Rng;

fn main() {
    println!(&quot;Guess the number!&quot;);

    let secret_number = rand::thread_rng().gen_range(1, 101);

    println!(&quot;The secret number is: {}&quot;, secret_number);

    println!(&quot;Please input your guess.&quot;);

    let mut guess = String::new();

    io::stdin().read_line(&amp;mut guess)
        .expect(&quot;Failed to read line&quot;);

    println!(&quot;You guessed: {}&quot;, guess);

    match guess.cmp(&amp;secret_number) {
        Ordering::Less    =&gt; println!(&quot;Too small!&quot;),
        Ordering::Greater =&gt; println!(&quot;Too big!&quot;),
        Ordering::Equal   =&gt; println!(&quot;You win!&quot;),
    }
}
</code></pre>
<p><span class="caption">Listing 2-4: Handling the possible return values of
comparing two numbers</span></p>
<p>æ–°ä»£ç çš„ç¬¬ä¸€è¡Œæ˜¯å¦ä¸€ä¸ª <code>use</code>ï¼Œä»æ ‡å‡†åº“å¼•å…¥äº†ä¸€ä¸ªå«åš <code>std::cmp::Ordering</code> çš„ç±»å‹ã€‚<code>Ordering</code> æ˜¯ä¸€ä¸ªåƒ <code>Result</code> ä¸€æ ·çš„æšä¸¾ï¼Œä¸è¿‡å®ƒçš„æˆå‘˜æ˜¯ <code>Less</code>ã€<code>Greater</code> å’Œ <code>Equal</code>ã€‚è¿™æ˜¯ä½ åšæ¯”è¾ƒæ—¶å¯èƒ½å‡ºç°çš„ä¸‰ç§ç»“æœã€‚</p>
<p>æ¥ç€ï¼Œåº•éƒ¨çš„äº”è¡Œæ–°ä»£ç ä½¿ç”¨äº† <code>Ordering</code> ç±»å‹ï¼š</p>
<pre><code class="language-rust">match guess.cmp(&amp;secret_number) {
    Ordering::Less    =&gt; println!(&quot;Too small!&quot;),
    Ordering::Greater =&gt; println!(&quot;Too big!&quot;),
    Ordering::Equal   =&gt; println!(&quot;You win!&quot;),
}
</code></pre>
<p><code>cmp</code> æ–¹æ³•ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼ã€‚åœ¨ä»»ä½•å¯æ¯”è¾ƒçš„å€¼ä¸Šè°ƒç”¨ï¼Œç„¶åè·å–å¦ä¸€ä¸ªè¢«æ¯”è¾ƒå€¼çš„å¼•ç”¨ï¼šè¿™é‡Œæ˜¯æŠŠ <code>guess</code> ä¸ <code>secret_number</code> åšæ¯”è¾ƒï¼Œè¿”å›ä¸€ä¸ª <code>Ordering</code> æšä¸¾çš„æˆå‘˜ã€‚å†ä½¿ç”¨ä¸€ä¸ª <a href="ch06-02-match.html"><code>match</code></a><!-- ignore --> è¡¨è¾¾å¼ï¼Œæ ¹æ®æšä¸¾æˆå‘˜æ¥å†³å®šæ¥ä¸‹æ¥å¹²ä»€ä¹ˆã€‚</p>
<p>ä¸€ä¸ª <code>match</code> è¡¨è¾¾å¼ç”± <strong>åˆ†æ”¯ï¼ˆarmsï¼‰</strong> æ„æˆã€‚ä¸€ä¸ªåˆ†æ”¯åŒ…å«ä¸€ä¸ª <strong>æ¨¡å¼</strong>ï¼ˆ<em>pattern</em>ï¼‰å’ŒåŠ¨ä½œï¼Œè¡¨è¾¾å¼å¤´çš„æ±‚å€¼ç»“æœç¬¦åˆåˆ†æ”¯çš„æ¨¡å¼æ—¶å°†æ‰§è¡Œå¯¹åº”çš„åŠ¨ä½œã€‚Rust è·å–æä¾›ç»™ <code>match</code> çš„å€¼å¹¶æŒ¨ä¸ªæ£€æŸ¥æ¯ä¸ªåˆ†æ”¯çš„æ¨¡å¼ã€‚<code>match</code> ç»“æ„å’Œæ¨¡å¼æ˜¯ Rust çš„å¼ºå¤§åŠŸèƒ½ï¼Œå®ƒä½“ç°äº†ä»£ç å¯èƒ½é‡åˆ°çš„å¤šç§æƒ…å½¢ï¼Œå¹¶å¸®åŠ©ä½ æ²¡æœ‰é—æ¼çš„å¤„ç†ã€‚è¿™äº›åŠŸèƒ½å°†åˆ†åˆ«åœ¨ç¬¬å…­ç« å’Œç¬¬åå…«ç« è¯¦ç»†ä»‹ç»ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨ <code>match</code> è¡¨è¾¾å¼çš„ä¾‹å­ã€‚å‡è®¾ç”¨æˆ·çŒœäº† 50ï¼Œè¿™æ—¶éšæœºç”Ÿæˆçš„ç§˜å¯†æ•°å­—æ˜¯ 38ã€‚æ¯”è¾ƒ 50 ä¸ 38 æ—¶ï¼Œå› ä¸º 50 æ¯” 38 è¦å¤§ï¼Œ<code>cmp</code> æ–¹æ³•ä¼šè¿”å› <code>Ordering::Greater</code>ã€‚<code>match</code> è¡¨è¾¾å¼å¾—åˆ°è¯¥å€¼ï¼Œç„¶åæ£€æŸ¥ç¬¬ä¸€ä¸ªåˆ†æ”¯çš„æ¨¡å¼ï¼Œ<code>Ordering::Less</code> ä¸ <code>Ordering::Greater</code>å¹¶ä¸åŒ¹é…ï¼Œæ‰€ä»¥å®ƒå¿½ç•¥äº†è¿™ä¸ªåˆ†æ”¯çš„åŠ¨ä½œå¹¶æ¥åˆ°ä¸‹ä¸€ä¸ªåˆ†æ”¯ã€‚ä¸‹ä¸€ä¸ªåˆ†æ”¯çš„æ¨¡å¼æ˜¯ <code>Ordering::Greater</code>ï¼Œ<strong>æ­£ç¡®</strong>åŒ¹é…ï¼è¿™ä¸ªåˆ†æ”¯å…³è”çš„åŠ¨ä½œè¢«æ‰§è¡Œï¼Œåœ¨å±å¹•æ‰“å°å‡º <code>Too big!</code>ã€‚<code>match</code> è¡¨è¾¾å¼å°±æ­¤ç»ˆæ­¢ï¼Œå› ä¸ºè¯¥åœºæ™¯ä¸‹æ²¡æœ‰æ£€æŸ¥æœ€åä¸€ä¸ªåˆ†æ”¯çš„å¿…è¦ã€‚</p>
<p>ç„¶è€Œï¼Œåˆ—è¡¨ 2-4 çš„ä»£ç å¹¶ä¸èƒ½ç¼–è¯‘ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹ï¼š</p>
<pre><code>$ cargo build
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
error[E0308]: mismatched types
  --&gt; src/main.rs:23:21
   |
23 |     match guess.cmp(&amp;secret_number) {
   |                     ^^^^^^^^^^^^^^ expected struct `std::string::String`, found integral variable
   |
   = note: expected type `&amp;std::string::String`
   = note:    found type `&amp;{integer}`

error: aborting due to previous error
Could not compile `guessing_game`.
</code></pre>
<p>é”™è¯¯çš„æ ¸å¿ƒè¡¨æ˜è¿™é‡Œæœ‰<strong>ä¸åŒ¹é…çš„ç±»å‹</strong>ï¼ˆ<em>mismatched types</em>ï¼‰ã€‚Rust æœ‰ä¸€ä¸ªé™æ€å¼ºç±»å‹ç³»ç»Ÿï¼ŒåŒæ—¶ä¹Ÿæœ‰ç±»å‹æ¨æ–­ã€‚å½“æˆ‘ä»¬å†™å‡º <code>let guess = String::new()</code> æ—¶ï¼ŒRust æ¨æ–­å‡º <code>guess</code> åº”è¯¥æ˜¯ä¸€ä¸ª<code>String</code>ï¼Œä¸éœ€è¦æˆ‘ä»¬å†™å‡ºç±»å‹ã€‚å¦ä¸€æ–¹é¢ï¼Œ<code>secret_number</code>ï¼Œæ˜¯ä¸€ä¸ªæ•°å­—ç±»å‹ã€‚å¤šç§æ•°å­—ç±»å‹æ‹¥æœ‰ 1 åˆ° 100 ä¹‹é—´çš„å€¼ï¼š32 ä½æ•°å­— <code>i32</code>ï¼›32 ä½æ— ç¬¦å·æ•°å­— <code>u32</code>ï¼›64 ä½æ•°å­— <code>i64</code> ç­‰ç­‰ã€‚Rust é»˜è®¤ä½¿ç”¨ <code>i32</code>ï¼Œæ‰€ä»¥å®ƒæ˜¯ <code>secret_number</code> çš„ç±»å‹ï¼Œé™¤éå¢åŠ ç±»å‹ä¿¡æ¯ï¼Œæˆ–ä»»ä½•èƒ½è®© Rust æ¨æ–­å‡ºä¸åŒæ•°å€¼ç±»å‹çš„ä¿¡æ¯ã€‚è¿™é‡Œé”™è¯¯çš„åŸå› åœ¨äº Rust ä¸ä¼šæ¯”è¾ƒå­—ç¬¦ä¸²ç±»å‹å’Œæ•°å­—ç±»å‹ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¿…é¡»æŠŠä»è¾“å…¥ä¸­è¯»å–åˆ°çš„ <code>String</code> è½¬æ¢ä¸ºä¸€ä¸ªçœŸæ­£çš„æ•°å­—ç±»å‹ï¼Œæ‰å¥½ä¸ç§˜å¯†æ•°å­—è¿›è¡Œæ¯”è¾ƒã€‚å¯ä»¥é€šè¿‡åœ¨ <code>main</code> å‡½æ•°ä½“ä¸­å¢åŠ å¦‚ä¸‹ä¸¤è¡Œä»£ç æ¥å®ç°ï¼š</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust">extern crate rand;

use std::io;
use std::cmp::Ordering;
use rand::Rng;

fn main() {
    println!(&quot;Guess the number!&quot;);

    let secret_number = rand::thread_rng().gen_range(1, 101);

    println!(&quot;The secret number is: {}&quot;, secret_number);

    println!(&quot;Please input your guess.&quot;);

    let mut guess = String::new();

    io::stdin().read_line(&amp;mut guess)
        .expect(&quot;Failed to read line&quot;);

    let guess: u32 = guess.trim().parse()
        .expect(&quot;Please type a number!&quot;);

    println!(&quot;You guessed: {}&quot;, guess);

    match guess.cmp(&amp;secret_number) {
        Ordering::Less    =&gt; println!(&quot;Too small!&quot;),
        Ordering::Greater =&gt; println!(&quot;Too big!&quot;),
        Ordering::Equal   =&gt; println!(&quot;You win!&quot;),
    }
}
</code></pre>
<p>è¿™ä¸¤è¡Œä»£ç æ˜¯ï¼š</p>
<pre><code class="language-rust">let guess: u32 = guess.trim().parse()
    .expect(&quot;Please type a number!&quot;);
</code></pre>
<p>è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªå«åš <code>guess</code> çš„å˜é‡ã€‚ä¸è¿‡ç­‰ç­‰ï¼Œä¸æ˜¯å·²ç»æœ‰äº†ä¸€ä¸ªå«åš<code>guess</code>çš„å˜é‡äº†å—ï¼Ÿç¡®å®å¦‚æ­¤ï¼Œä¸è¿‡ Rust å…è®¸<strong>é®ç›–</strong>ï¼ˆ<em>shadow</em>ï¼‰ï¼Œç”¨ä¸€ä¸ªæ–°å€¼æ¥é®ç›– <code>guess</code> ä¹‹å‰çš„å€¼ã€‚è¿™ä¸ªåŠŸèƒ½å¸¸ç”¨åœ¨éœ€è¦è½¬æ¢å€¼ç±»å‹ä¹‹ç±»çš„åœºæ™¯ï¼Œå®ƒå…è®¸æˆ‘ä»¬å¤ç”¨ <code>guess</code> å˜é‡çš„åå­—ï¼Œè€Œä¸æ˜¯è¢«è¿«åˆ›å»ºä¸¤ä¸ªä¸åŒå˜é‡ï¼Œè¯¸å¦‚ <code>guess_str</code> å’Œ <code>guess</code> ä¹‹ç±»ã€‚ï¼ˆç¬¬ä¸‰ç« ä¼šä»‹ç» shadowing çš„æ›´å¤šç»†èŠ‚ã€‚ï¼‰</p>
<p><code>guess</code> è¢«ç»‘å®šåˆ° <code>guess.trim().parse()</code> è¡¨è¾¾å¼ã€‚è¡¨è¾¾å¼ä¸­çš„ <code>guess</code> æ˜¯åŒ…å«è¾“å…¥çš„ <code>String</code> ç±»å‹ã€‚<code>String</code> å®ä¾‹çš„ <code>trim</code> æ–¹æ³•ä¼šå»é™¤å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾çš„ç©ºç™½ã€‚<code>u32</code> åªèƒ½ç”±æ•°å­—å­—ç¬¦è½¬æ¢ï¼Œä¸è¿‡ç”¨æˆ·å¿…é¡»è¾“å…¥å›è½¦é”®æ‰èƒ½è®© <code>read_line</code> è¿”å›ï¼Œç„¶è€Œç”¨æˆ·æŒ‰ä¸‹å›è½¦é”®æ—¶ï¼Œä¼šåœ¨å­—ç¬¦ä¸²ä¸­å¢åŠ ä¸€ä¸ªæ¢è¡Œï¼ˆnewlineï¼‰ç¬¦ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·è¾“å…¥ 5 å¹¶å›è½¦ï¼Œ<code>guess</code> çœ‹èµ·æ¥åƒè¿™æ ·ï¼š<code>5\n</code>ã€‚<code>\n</code> ä»£è¡¨â€œæ¢è¡Œâ€ï¼Œå›è½¦é”®ã€‚<code>trim</code> æ–¹æ³•æ¶ˆé™¤ <code>\n</code>ï¼Œåªç•™ä¸‹<code>5</code>ã€‚</p>
<p><a href="https://doc.rust-lang.org/std/primitive.str.html#method.parse">å­—ç¬¦ä¸²çš„<code>parse</code>æ–¹æ³•</a><!-- ignore --> å°†å­—ç¬¦ä¸²è§£ææˆæ•°å­—ã€‚è¿™ä¸ªæ–¹æ³•å¯ä»¥è§£æå¤šç§æ•°å­—ç±»å‹ï¼Œå› æ­¤éœ€è¦å‘Šè¯‰ Rust å…·ä½“çš„æ•°å­—ç±»å‹ï¼Œè¿™é‡Œé€šè¿‡ <code>let guess: u32</code> æŒ‡å®šã€‚<code>guess</code> åé¢çš„å†’å·ï¼ˆ<code>:</code>ï¼‰å‘Šè¯‰ Rust æˆ‘ä»¬æŒ‡å®šäº†å˜é‡çš„ç±»å‹ã€‚Rust æœ‰ä¸€äº›å†…å»ºçš„æ•°å­—ç±»å‹ï¼›<code>u32</code> æ˜¯ä¸€ä¸ªæ— ç¬¦å·çš„ 32 ä½æ•´å‹ã€‚å¯¹äºä¸å¤§çš„æ­£æ•´æ•°æ¥è¯´ï¼Œå®ƒæ˜¯ä¸é”™çš„ç±»å‹ï¼Œç¬¬ä¸‰ç« è¿˜ä¼šè®²åˆ°å…¶ä»–æ•°å­—ç±»å‹ã€‚å¦å¤–ï¼Œç¨‹åºä¸­çš„ <code>u32</code> æ³¨è§£ä»¥åŠä¸ <code>secret_number</code> çš„æ¯”è¾ƒï¼Œæ„å‘³ç€ Rust ä¼šæ¨æ–­å‡º <code>secret_number</code> ä¹Ÿæ˜¯ <code>u32</code> ç±»å‹ã€‚ç°åœ¨å¯ä»¥ä½¿ç”¨ç›¸åŒç±»å‹æ¯”è¾ƒä¸¤ä¸ªå€¼äº†ï¼</p>
<p><code>parse</code> è°ƒç”¨å¯èƒ½äº§ç”Ÿé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²ä¸­åŒ…å« <code>AğŸ‘%</code>ï¼Œå°±æ— æ³•å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—ã€‚å› æ­¤ï¼Œ<code>parse</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>Result</code> ç±»å‹ã€‚åƒä¹‹å‰è®¨è®ºçš„ <code>read_line</code> æ–¹æ³•ï¼ŒæŒ‰éƒ¨å°±ç­çš„ç”¨ <code>expect</code> æ–¹æ³•å¤„ç†å³å¯ã€‚å¦‚æœ <code>parse</code> ä¸èƒ½ä»å­—ç¬¦ä¸²ç”Ÿæˆä¸€ä¸ªæ•°å­—ï¼Œè¿”å›ä¸€ä¸ª <code>Result::Err</code> æ—¶ï¼Œ<code>expect</code> ä¼šä½¿æ¸¸æˆå´©æºƒå¹¶æ‰“å°é™„å¸¦çš„ä¿¡æ¯ã€‚å¦‚æœ <code>parse</code> æˆåŠŸåœ°å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—ï¼Œå®ƒä¼šè¿”å› <code>Result::Ok</code>ï¼Œç„¶å <code>expect</code> ä¼šè¿”å› <code>Ok</code> ä¸­çš„æ•°å­—ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬è¿è¡Œç¨‹åºï¼</p>
<pre><code>$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
     Running `target/guessing_game`
Guess the number!
The secret number is: 58
Please input your guess.
  76
You guessed: 76
Too big!
</code></pre>
<p>æ¼‚äº®ï¼å³ä¾¿æ˜¯åœ¨çŒœæµ‹ä¹‹å‰æ·»åŠ äº†ç©ºæ ¼ï¼Œç¨‹åºä¾ç„¶èƒ½åˆ¤æ–­å‡ºç”¨æˆ·çŒœæµ‹äº† 76ã€‚å¤šè¿è¡Œç¨‹åºå‡ æ¬¡æ¥æ£€éªŒä¸åŒç±»å‹è¾“å…¥çš„ç›¸åº”è¡Œä¸ºï¼šçŒœä¸€ä¸ªæ­£ç¡®çš„æ•°å­—ï¼ŒçŒœä¸€ä¸ªè¿‡å¤§çš„æ•°å­—å’ŒçŒœä¸€ä¸ªè¿‡å°çš„æ•°å­—ã€‚</p>
<p>ç°åœ¨æ¸¸æˆå·²ç»å¤§ä½“ä¸Šèƒ½ç©äº†ï¼Œä¸è¿‡ç”¨æˆ·åªèƒ½çŒœä¸€æ¬¡ã€‚å¢åŠ ä¸€ä¸ªå¾ªç¯æ¥æ”¹å˜å®ƒå§ï¼</p>
<a class="header" href="#ä½¿ç”¨å¾ªç¯æ¥å…è®¸å¤šæ¬¡çŒœæµ‹" name="ä½¿ç”¨å¾ªç¯æ¥å…è®¸å¤šæ¬¡çŒœæµ‹"><h2>ä½¿ç”¨å¾ªç¯æ¥å…è®¸å¤šæ¬¡çŒœæµ‹</h2></a>
<p><code>loop</code> å…³é”®å­—æä¾›äº†ä¸€ä¸ªæ— é™å¾ªç¯ã€‚å°†å…¶åŠ å…¥åï¼Œç”¨æˆ·å¯ä»¥åå¤çŒœæµ‹ï¼š</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust">extern crate rand;

use std::io;
use std::cmp::Ordering;
use rand::Rng;

fn main() {
    println!(&quot;Guess the number!&quot;);

    let secret_number = rand::thread_rng().gen_range(1, 101);

    println!(&quot;The secret number is: {}&quot;, secret_number);

    loop {
        println!(&quot;Please input your guess.&quot;);

        let mut guess = String::new();

        io::stdin().read_line(&amp;mut guess)
            .expect(&quot;Failed to read line&quot;);

        let guess: u32 = guess.trim().parse()
            .expect(&quot;Please type a number!&quot;);

        println!(&quot;You guessed: {}&quot;, guess);

        match guess.cmp(&amp;secret_number) {
            Ordering::Less    =&gt; println!(&quot;Too small!&quot;),
            Ordering::Greater =&gt; println!(&quot;Too big!&quot;),
            Ordering::Equal   =&gt; println!(&quot;You win!&quot;),
        }
    }
}
</code></pre>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬å°†æç¤ºç”¨æˆ·çŒœæµ‹ä¹‹åçš„æ‰€æœ‰å†…å®¹æ”¾å…¥äº†å¾ªç¯ã€‚ç¡®ä¿è¿™äº›ä»£ç é¢å¤–ç¼©è¿›äº†ä¸€å±‚ï¼Œå†æ¬¡è¿è¡Œç¨‹åºã€‚æ³¨æ„è¿™é‡Œæœ‰ä¸€ä¸ªæ–°é—®é¢˜ï¼Œå› ä¸ºç¨‹åºå¿ å®åœ°æ‰§è¡Œäº†æˆ‘ä»¬çš„è¦æ±‚ï¼šæ°¸è¿œåœ°è¯·æ±‚å¦ä¸€ä¸ªçŒœæµ‹ï¼Œç”¨æˆ·æ²¡æ³•é€€å‡ºï¼</p>
<p>ç”¨æˆ·æ€»èƒ½ä½¿ç”¨ <code>Ctrl-C</code> ç»ˆæ­¢ç¨‹åºã€‚ä¸è¿‡è¿˜æœ‰å¦ä¸€ä¸ªæ–¹æ³•è·³å‡ºæ— é™å¾ªç¯ï¼Œå°±æ˜¯â€œæ¯”è¾ƒçŒœæµ‹â€éƒ¨åˆ†æåˆ°çš„ <code>parse</code>ï¼šå¦‚æœç”¨æˆ·è¾“å…¥ä¸€ä¸ªéæ•°å­—ç­”æ¡ˆï¼Œç¨‹åºä¼šå´©æºƒã€‚ç”¨æˆ·å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹æ¥é€€å‡ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code>$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
     Running `target/guessing_game`
Guess the number!
The secret number is: 59
Please input your guess.
45
You guessed: 45
Too small!
Please input your guess.
60
You guessed: 60
Too big!
Please input your guess.
59
You guessed: 59
You win!
Please input your guess.
quit
thread 'main' panicked at 'Please type a number!: ParseIntError { kind: InvalidDigit }', src/libcore/result.rs:785
note: Run with `RUST_BACKTRACE=1` for a backtrace.
error: Process didn't exit successfully: `target/debug/guess` (exit code: 101)
</code></pre>
<p>è¾“å…¥ <code>quit</code> ç¡®å®é€€å‡ºäº†ç¨‹åºï¼ŒåŒæ—¶å…¶ä»–ä»»ä½•éæ•°å­—è¾“å…¥ä¹Ÿä¸€æ ·ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸ç†æƒ³ï¼Œæˆ‘ä»¬æƒ³è¦å½“çŒœæµ‹æ­£ç¡®çš„æ•°å­—æ—¶æ¸¸æˆèƒ½è‡ªåŠ¨é€€å‡ºã€‚</p>
<a class="header" href="#çŒœæµ‹æ­£ç¡®åé€€å‡º" name="çŒœæµ‹æ­£ç¡®åé€€å‡º"><h3>çŒœæµ‹æ­£ç¡®åé€€å‡º</h3></a>
<p>è®©æˆ‘ä»¬å¢åŠ ä¸€ä¸ª <code>break</code>ï¼Œåœ¨ç”¨æˆ·çŒœå¯¹æ—¶é€€å‡ºæ¸¸æˆï¼š</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust">extern crate rand;

use std::io;
use std::cmp::Ordering;
use rand::Rng;

fn main() {
    println!(&quot;Guess the number!&quot;);

    let secret_number = rand::thread_rng().gen_range(1, 101);

    println!(&quot;The secret number is: {}&quot;, secret_number);

    loop {
        println!(&quot;Please input your guess.&quot;);

        let mut guess = String::new();

        io::stdin().read_line(&amp;mut guess)
            .expect(&quot;Failed to read line&quot;);

        let guess: u32 = guess.trim().parse()
            .expect(&quot;Please type a number!&quot;);

        println!(&quot;You guessed: {}&quot;, guess);

        match guess.cmp(&amp;secret_number) {
            Ordering::Less    =&gt; println!(&quot;Too small!&quot;),
            Ordering::Greater =&gt; println!(&quot;Too big!&quot;),
            Ordering::Equal   =&gt; {
                println!(&quot;You win!&quot;);
                break;
            }
        }
    }
}
</code></pre>
<p>é€šè¿‡åœ¨ <code>You win!</code> ä¹‹åå¢åŠ ä¸€è¡Œ <code>break</code>ï¼Œç”¨æˆ·çŒœå¯¹äº†ç¥ç§˜æ•°å­—åä¼šé€€å‡ºå¾ªç¯ã€‚é€€å‡ºå¾ªç¯ä¹Ÿæ„å‘³ç€é€€å‡ºç¨‹åºï¼Œå› ä¸ºå¾ªç¯æ˜¯ <code>main</code> çš„æœ€åä¸€éƒ¨åˆ†ã€‚</p>
<a class="header" href="#å¤„ç†æ— æ•ˆè¾“å…¥" name="å¤„ç†æ— æ•ˆè¾“å…¥"><h3>å¤„ç†æ— æ•ˆè¾“å…¥</h3></a>
<p>ä¸ºäº†è¿›ä¸€æ­¥æ”¹å–„æ¸¸æˆæ€§ï¼Œä¸è¦åœ¨ç”¨æˆ·è¾“å…¥éæ•°å­—æ—¶å´©æºƒï¼Œéœ€è¦å¿½ç•¥éæ•°å­—ï¼Œè®©ç”¨æˆ·å¯ä»¥ç»§ç»­çŒœæµ‹ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹ <code>guess</code> å°† <code>String</code> è½¬åŒ–ä¸º <code>u32</code> é‚£éƒ¨åˆ†ä»£ç æ¥å®ç°ï¼š</p>
<pre><code class="language-rust">let guess: u32 = match guess.trim().parse() {
    Ok(num) =&gt; num,
    Err(_) =&gt; continue,
};
</code></pre>
<p>å°† <code>expect</code> è°ƒç”¨æ¢æˆ <code>match</code> è¯­å¥,æ˜¯ä»â€œç«‹å³å´©æºƒâ€è½¬åˆ°çœŸæ­£å¤„ç†é”™è¯¯çš„æƒ¯ç”¨æ–¹æ³•ã€‚é¡»çŸ¥ <code>parse</code> è¿”å›ä¸€ä¸ª <code>Result</code> ç±»å‹ï¼Œè€Œ <code>Result</code> æ˜¯ä¸€ä¸ªæ‹¥æœ‰ <code>Ok</code> æˆ– <code>Err</code> æˆå‘˜çš„æšä¸¾ã€‚è¿™é‡Œä½¿ç”¨çš„ <code>match</code> è¡¨è¾¾å¼ï¼Œå’Œä¹‹å‰å¤„ç† <code>cmp</code> æ–¹æ³•è¿”å› <code>Ordering</code> æ—¶ç”¨çš„ä¸€æ ·ã€‚</p>
<p>å¦‚æœ <code>parse</code> èƒ½å¤ŸæˆåŠŸçš„å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªåŒ…å«ç»“æœæ•°å­—çš„ <code>Ok</code>ã€‚è¿™ä¸ª <code>Ok</code> å€¼ä¸<code>match</code> ç¬¬ä¸€ä¸ªåˆ†æ”¯çš„æ¨¡å¼ç›¸åŒ¹é…ï¼Œè¯¥åˆ†æ”¯å¯¹åº”çš„åŠ¨ä½œè¿”å› <code>Ok</code> å€¼ä¸­çš„æ•°å­— <code>num</code>ï¼Œæœ€åå¦‚æ„¿å˜æˆæ–°åˆ›å»ºçš„ <code>guess</code> å˜é‡ã€‚</p>
<p>å¦‚æœ <code>parse</code> <em>ä¸</em>èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªåŒ…å«æ›´å¤šé”™è¯¯ä¿¡æ¯çš„ <code>Err</code>ã€‚<code>Err</code> å€¼ä¸èƒ½åŒ¹é…ç¬¬ä¸€ä¸ª <code>match</code> åˆ†æ”¯çš„ <code>Ok(num)</code> æ¨¡å¼ï¼Œä½†æ˜¯ä¼šåŒ¹é…ç¬¬äºŒä¸ªåˆ†æ”¯çš„ <code>Err(_)</code> æ¨¡å¼ï¼š<code>_</code> æ˜¯ä¸€ä¸ªå…œåº•å€¼ï¼Œç”¨æ¥åŒ¹é…æ‰€æœ‰ <code>Err</code> å€¼ï¼Œä¸ç®¡å…¶ä¸­æœ‰ä½•ç§ä¿¡æ¯ã€‚æ‰€ä»¥ç¨‹åºä¼šæ‰§è¡Œç¬¬äºŒä¸ªåˆ†æ”¯çš„åŠ¨ä½œï¼Œ<code>continue</code> æ„å‘³ç€è¿›å…¥ <code>loop</code> çš„ä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œè¯·æ±‚å¦ä¸€ä¸ªçŒœæµ‹ã€‚è¿™æ ·ç¨‹åºå°±å¿½ç•¥äº† <code>parse</code> å¯èƒ½é‡åˆ°çš„æ‰€æœ‰é”™è¯¯ï¼</p>
<p>ç°åœ¨ä¸‡äº‹ä¿±å¤‡ï¼Œåªéœ€è¿è¡Œ <code>cargo run</code>ï¼š</p>
<pre><code>$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
     Running `target/guessing_game`
Guess the number!
The secret number is: 61
Please input your guess.
10
You guessed: 10
Too small!
Please input your guess.
99
You guessed: 99
Too big!
Please input your guess.
foo
Please input your guess.
61
You guessed: 61
You win!
</code></pre>
<p>å¤ªæ£’äº†ï¼å†æœ‰æœ€åä¸€ä¸ªå°çš„ä¿®æ”¹ï¼Œå°±èƒ½å®ŒæˆçŒœçŒœçœ‹æ¸¸æˆäº†ï¼šè¿˜è®°å¾—ç¨‹åºä¾ç„¶ä¼šæ‰“å°å‡ºç§˜å¯†æ•°å­—ã€‚åœ¨æµ‹è¯•æ—¶è¿˜å¥½ï¼Œä½†æ­£å¼å‘å¸ƒæ—¶ä¼šæ¯äº†æ¸¸æˆã€‚åˆ æ‰æ‰“å°ç§˜å¯†æ•°å­—çš„ <code>println!</code>ã€‚åˆ—è¡¨ 2-5 ä¸ºæœ€ç»ˆä»£ç ï¼š</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust">extern crate rand;

use std::io;
use std::cmp::Ordering;
use rand::Rng;

fn main() {
    println!(&quot;Guess the number!&quot;);

    let secret_number = rand::thread_rng().gen_range(1, 101);

    loop {
        println!(&quot;Please input your guess.&quot;);

        let mut guess = String::new();

        io::stdin().read_line(&amp;mut guess)
            .expect(&quot;Failed to read line&quot;);

        let guess: u32 = match guess.trim().parse() {
            Ok(num) =&gt; num,
            Err(_) =&gt; continue,
        };

        println!(&quot;You guessed: {}&quot;, guess);

        match guess.cmp(&amp;secret_number) {
            Ordering::Less    =&gt; println!(&quot;Too small!&quot;),
            Ordering::Greater =&gt; println!(&quot;Too big!&quot;),
            Ordering::Equal   =&gt; {
                println!(&quot;You win!&quot;);
                break;
            }
        }
    }
}
</code></pre>
<p><span class="caption">Listing 2-5: Complete code of the guessing game</span></p>
<a class="header" href="#æ€»ç»“" name="æ€»ç»“"><h2>æ€»ç»“</h2></a>
<p>æ­¤æ—¶æ­¤åˆ»ï¼Œä½ é¡ºåˆ©å®Œæˆäº†çŒœçŒœçœ‹æ¸¸æˆï¼æ­å–œï¼</p>
<p>è¿™æ˜¯ä¸€ä¸ªé€šè¿‡åŠ¨æ‰‹å®è·µå­¦ä¹  Rust æ–°æ¦‚å¿µçš„é¡¹ç›®ï¼š<code>let</code>ã€<code>match</code>ã€æ–¹æ³•ã€å…³è”å‡½æ•°ã€ä½¿ç”¨å¤–éƒ¨ crate ç­‰ç­‰ï¼Œæ¥ä¸‹æ¥çš„å‡ ç« ï¼Œæˆ‘ä»¬å°†ä¼šç»§ç»­æ·±å…¥ã€‚ç¬¬ä¸‰ç« æ¶‰åŠåˆ°å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€éƒ½æœ‰çš„æ¦‚å¿µï¼Œæ¯”å¦‚å˜é‡ã€æ•°æ®ç±»å‹å’Œå‡½æ•°ï¼Œä»¥åŠå¦‚ä½•åœ¨ Rust ä¸­ä½¿ç”¨ä»–ä»¬ã€‚ç¬¬å››ç« æ¢ç´¢æ‰€æœ‰æƒï¼ˆownershipï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ª Rust åŒå…¶ä»–è¯­è¨€éƒ½ä¸ç›¸åŒçš„åŠŸèƒ½ã€‚ç¬¬äº”ç« è®¨è®ºç»“æ„ä½“å’Œæ–¹æ³•çš„è¯­æ³•ï¼Œè€Œç¬¬å…­ç« ä¾§é‡è§£é‡Šæšä¸¾ã€‚</p>

                </div>

                <!-- Mobile navigation buttons -->
                
                    <a href="ch01-02-hello-world.html" class="mobile-nav-chapters previous">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="ch03-00-common-programming-concepts.html" class="mobile-nav-chapters next">
                        <i class="fa fa-angle-right"></i>
                    </a>
                

            </div>

            
                <a href="ch01-02-hello-world.html" class="nav-chapters previous" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-left"></i>
                </a>
            

            
                <a href="ch03-00-common-programming-concepts.html" class="nav-chapters next" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-right"></i>
                </a>
            

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if ($(".fa").css("font-family") !== "FontAwesome") {
                $('<link rel="stylesheet" type="text/css" href="_FontAwesome/css/font-awesome.css">').prependTo('head');
            }
        </script>

        <!-- Livereload script (if served using the cli tool) -->
        

        <script src="highlight.js"></script>
        <script src="book.js"></script>
    </body>
</html>
